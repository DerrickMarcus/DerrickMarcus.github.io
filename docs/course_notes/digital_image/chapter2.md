# 第二章 图像信息与视觉感知

## 2.1 彩色视觉和色度图

眼睛的形状近似球体，直径约20mm。

晶状体聚焦中心至视网膜距离的变化范围14-17mm。

七色光由可见范围的电磁波谱的波长组成，彩色光覆盖的电磁波谱大约从400-700nm。

人眼有两类光接收器：锥状体和杆状体，锥状体对颜色灵敏度高。人眼的锥体细胞有3种，分别感受红光、绿光与蓝光，称为感红、感绿、感蓝锥体细胞。通过红、绿、蓝三种光线不同比例的混合，可以获得任何一种颜色的光线，因此将红、绿、蓝这三种光称为原色。

光的三种基色：

1. 红：R，red，700nm
2. 绿：G，green，546.1nm
3. 蓝：B，blue，435.8nm

三种补色：

1. 青/蓝绿：C，cyan，G+B
2. 品红：M，magenta，R+B
3. 黄：Y，yellow，R+G

CIE-RGB 色彩空间：

$C=rR+gG+bB$ ，比例系数 $r+g+b=1$ ，色系数 $(r,g,b)$ 表示色度。

CIE-XYZ 色彩空间：

$C=xX+yY+zZ$ ，外切三角形转换到第一象限颜色由三刺激值 X,Y,Z 混合。混合系数 $(x, y, z)$ 为正。

三色刺激值 X,Y,Z 与 R,G,B 的换算关系：

$$
\begin{bmatrix}
X \\
Y \\
Z
\end{bmatrix}
=
\begin{bmatrix}
0.4902 & 0.3099 & 0.1999 \\
0.1770 & 0.8123 & 0.0107 \\
0.0000 & 0.0101 & 0.9899
\end{bmatrix}
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
$$

$$
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
=
\begin{bmatrix}
2.3635 & -0.8958 & -0.4677 \\
-0.5151 & 1.4264 & 0.0887 \\
0.0052 & -0.0145 & 1.0093
\end{bmatrix}
\begin{bmatrix}
X \\
Y \\
Z
\end{bmatrix}
$$

描述彩色特性的三种（基本）感知量：

1. 亮度（辉度）：与光的强度直接相关，与物体的反射率成正比，无彩色时只有辉度量。
2. 色度：
    1. 色调：与光谱中光的波长相联系。表示光的颜色，决定于混合光谱中主要光的波长，由强度最大的彩色成分决定。
    2. 饱和度：与一定色调光的纯度有关。与表示彩色光的鲜艳度，取决于彩色中的白色光含量。数值为介于0~100%的百分比。随着白光含量的增加，饱和度逐渐减少。

色调和饱和度合起来称为色度，彩色可用亮度和色度共同表示。

在色度图中：

1. 每点都对应一种颜色。
2. 边界上的点代表纯彩色，中心点 W 处纯度为零。
3. 接任两端点的直线上的各点表示将这两端点所代表的彩色相加可组成的一种新彩色。
4. 过 W 点直线端点的两彩色为互补色。
5. 三角形包含由三顶点可组成的所有可能的颜色组合。

## 2.2 彩色模型

### 2.2.1 面向硬件设备的彩色模型

图像处理中，最通用的模型是 **RGB 模型**，采用加法混色法，因为它是描述各种“光”通过何种比例来产生颜色。位于系统中的每种颜色都由单个点表示，坐标系统是一个立方体。

如果进行图像分割，在 R,B 两个通道上效果比较好。

CMY 模型：使用减法混色法。 $C=1-R,M=1-G,Y=1-B$ 。

RGBA 色彩空间：在 RGB 的基础上增加了不透明度 Alpha 通道，0%表示像素完全透明（看不见），100%表示像素完全不透明，中间使得像素可以透过背景显示出来。

CMYK 模型：一种减法颜色模型，最佳的打印颜色模式。通过不同强度的青（Cyan）、品红（Magenta）、黄（Yellow）和黑（Key/Black）合来表示所有颜色。

### 2.2.2 面向视觉感知的彩色模型

HSI 模型：用户直观的色彩模型，H(色调 hue)，S(饱和度 saturation )，I(密度或明度V，intensity，对应图像亮度)。

H 和S 分量与人感受彩色的方式紧密相连（合称色度），I 分量与图象的彩色信息无关。

从 RGB 转换到 HSI：
$$
I = \frac{1}{3} (R + G + B) \\
S = 1 - \frac{3}{R + G + B} \min(R, G, B) \\
H = \arccos \left( \frac{\frac{1}{2}(R - G + R - B)}{\sqrt{(R - G)^2 + (R - B)(G - B)}} \right)
$$

从 HSI 转换到 RGB：

当 $H\in[0^\circ,120^\circ]$ ：
$$
B = I(1 - S)\\
R = I \left[ 1 + \frac{S \cos H}{\cos(60^\circ - H)} \right]\\
G = 3I - (B + R)
$$

当 $H\in[120^\circ,240^\circ]$ ：
$$
R = I(1 - S)\\
G = I \left[ 1 + \frac{S \cos(H-120^\circ)}{\cos(180^\circ - H)} \right]\\
B = 3I - (R + G)
$$

当 $H\in[240^\circ,360^\circ]$ ：
$$
G = I(1 - S)\\
B = I \left[ 1 + \frac{S \cos(H - 240^\circ)}{\cos(300^\circ - H)} \right]\\
R = 3I - (B + G)
$$

Lab 模型：与RGB模型相比的优点：

1. 色彩空间更大，可以表示自然界所有颜色
2. 更接近人类视觉，致力于感知均匀性
3. 弥补了RGB模式对设备色彩特性的依赖L分量匹配人类的亮度感知，调整亮度对比a,b分量用于进行精确的颜色平衡

| 彩色模型 | 定义                                                 | 特征                                            | 应用领域                                                   |
| :------: | :--------------------------------------------------- | :---------------------------------------------- | :--------------------------------------------------------- |
| RGB模型  | 描述三原色通道的颜色值，模仿生物视网膜的视锥细胞产生 | 由三基色组成的RGB彩色模型与人眼功能很好地匹配   | 数字图像的存储与显示，包括如彩色阴极射线管在内的显示器系统 |
| XYZ模型  | 三个假想的原色XYZ，分别匹配等能光谱的三刺激值        | 包含了人眼所能辨别的全部颜色                    | 给定量的确定颜色创造了条件                                 |
| HSI模型  | 采用色调，色饱和度和亮度描述色彩                     | 比RGB模型更符合人的视觉特性，便于人进行色彩判断 | 适用于彩色特性检测与分析，且可以简化图像分析和处理的工作量 |
| Lab模型  | 采用亮度与两颜色通道描述色彩                         | 具有比人类视觉更加宽广的色域                    | 用于接近人类视觉，致力于感知均匀性                         |
