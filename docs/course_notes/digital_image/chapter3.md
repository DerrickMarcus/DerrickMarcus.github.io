# 第三章 空域图像增强

## 3.1 图像增强概述

点操作：对单点像素操作，与邻域无关。模板操作的特例.

模板操作：对图像某个区域操作。

## 3.2 空间变换增强

### 3.2.1 图像间运算

图像间算术运算：加（可平均消除噪声）、减（可凸显差异，如运动物体检测）、乘、除。

图像间逻辑运算：与（mask操作）、或、非、异或。

补充知识：

色温是表示光线中包含颜色成分的一个计量单位，以温度的度量单位来记录颜色的程度，可以简单理解为颜色的温度。当黑体加热到一定的温度，黑体发出的光所含的光谱成分，就称为这一温度下的色温，计量单位为“K”（开尔文）。在摄影中，某一光源发出的光，与某一温度下黑体发出的光所含的光谱成分相同，就称为某K色温。

白平衡：白色的平衡，由于人眼的适应性，在不同色温下，都能准确判断出白色，但是相机在不同色温的光源下，会出现图像偏色，与人眼看到的颜色不一致，因此需要进行白平衡处理。

白平衡算法——灰度世界算法：
以灰度世界假设为基础，认为对于一幅有着大量色彩变化的图像, RGB 三个分量的平均值趋于同一个灰度K。

1. 确定灰度K：取固定值128或RGB三通道的平均值。
2. 计算各通道增益，即K与通道均值之比。
3. 根据增益调整RGB分量。

白平衡算法——完美反射算法：
假设图像世界中最亮的白点是一个镜面，能完美反射光照。基于白点，将三通道的数值进行适当地调整，以达到白平衡效果。

1. 计算每个像素的RGB通道之和，按大小计算出其前10%或其他比例的白色参考点的阈值T。
2. 计算图像三通道数值和大于T的点（即亮区）的各通道均值。
3. 计算各通道增益，即通道最大值与亮区通道均值之比。根据增益调整RGB分量。

### 3.2.2 图像灰度映射

灰度映射函数 $t=E_H(s)$。

基本灰度变换：

图像求反：灰度值反转 $t=(L-1)-s$。

增强对比度：分段拉伸函数。

![ch3_img1](../../assets/images/course_notes/digital_image/ch3_img1.png)

动态范围调整(压缩)：调整灰度变化的动态范围，低灰度范围的值得到扩展，高灰度范围的值得到压缩，使图像分布均匀。
常用对数变换 $t=c\cdot\log(1+s)$

灰度切分：突出某一范围的灰度，将 s1->s2 区间的灰度级突出，而将其他区间的灰度值变换为一个低灰度值。

![ch3_img2](../../assets/images/course_notes/digital_image/ch3_img2.png)

伽马校正：$t=Cs^{\gamma}$，$\gamma<1$ 提高灰度级，在正比函数上方，使图像变亮。$\gamma>1$ 降低灰度级，在正比函数下方，使图像变暗。

### 3.2.3 直方图变换

图像的灰度统计直方图，$p_s(s_k)=\dfrac{n_k}{n}$ 代表某一灰度出现的概率估计。

直方图均衡化：变换原始图像的直方图为均匀分布，使灰度层次丰富。使像素灰度值的动态范围最大，增强图像整体对比度。

变换函数应满足：在 $0\leq s \leq L-1$ 区间内单值单增，且值域动态范围不变。~~(这几乎是显然的)~~

累积直方图：$t_k=EH(s_k)=\sum\limits_{i=0}^{k}\dfrac{n_i}{n}$。由原图像从0至第k个灰度级的概率密度函数的累积和，作为新图像的第k级灰度的灰度值。相当于将概率密度函数积分为分布函数。

## 3.3 空间滤波增强

## 3.4 局部增强
